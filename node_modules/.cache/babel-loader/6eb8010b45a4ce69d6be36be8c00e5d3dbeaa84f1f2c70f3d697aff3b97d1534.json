{"ast":null,"code":"import React from'react';import Movies from'../components/Movies';import Search from'../components/Search';import Movie from'../components/Movie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class Main extends React.Component{constructor(){super(...arguments);this.state={show:'index',// index, search, movie\nmovies:[],// массив найденных фильмов\nmovie:{},// информация о фильме\nloading:true// идет запрос к серверу?\n};// пользователь набрал поисковый запрос и нажал Enter\nthis.handleEnter=(search,type)=>{if(search.trim()===\"\")return;this.setState({loading:true,show:'search'});search=encodeURIComponent(search);let url=\"http://www.omdbapi.com/?apikey=b14985af&s=\".concat(search);if(type!=='all'){url=url+\"&type=\".concat(type);}fetch(url).then(response=>response.json()).then(data=>{this.setState({movies:data.Search?data.Search:[],loading:false});});};// пользователь кликнул ссылке по «Read more» для просмотра\n// подробной информации по найденному фильму или сериалу\nthis.handleReadMore=id=>{this.setState({loading:true,show:'movie'});fetch(\"http://www.omdbapi.com/?apikey=b14985af&i=\".concat(id,\"&plot=full\")).then(response=>response.json()).then(data=>{this.setState({movie:data.Title?data:{},loading:false});});};}componentDidMount(){fetch('http://www.omdbapi.com/?apikey=b14985af&s=matrix').then(response=>response.json()).then(data=>{this.setState({movies:data.Search?data.Search:[],loading:false});});}render(){return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(Search,{enterHandler:this.handleEnter}),this.state.loading?/*#__PURE__*/_jsx(\"span\",{class:\"container loader\"}):this.state.show==='movie'?/*#__PURE__*/_jsx(Movie,{...this.state.movie}):/*#__PURE__*/_jsx(Movies,{movies:this.state.movies,readMoreHandler:this.handleReadMore})]});}}export default Main;","map":{"version":3,"names":["React","Movies","Search","Movie","jsx","_jsx","jsxs","_jsxs","Main","Component","constructor","arguments","state","show","movies","movie","loading","handleEnter","search","type","trim","setState","encodeURIComponent","url","concat","fetch","then","response","json","data","handleReadMore","id","Title","componentDidMount","render","className","children","enterHandler","class","readMoreHandler"],"sources":["E:/Films/films/demo/src/layout/Main.jsx"],"sourcesContent":["import React from 'react';\r\nimport Movies from '../components/Movies';\r\nimport Search from '../components/Search';\r\nimport Movie from '../components/Movie';\r\n\r\nclass Main extends React.Component {\r\n    state = {\r\n        show: 'index', // index, search, movie\r\n        movies: [], // массив найденных фильмов\r\n        movie: {}, // информация о фильме\r\n        loading: true, // идет запрос к серверу?\r\n    }\r\n\r\n    // пользователь набрал поисковый запрос и нажал Enter\r\n    handleEnter = (search, type) => {\r\n        if (search.trim() === \"\") return;\r\n        this.setState({\r\n            loading: true,\r\n            show: 'search'\r\n        });\r\n        search = encodeURIComponent(search);\r\n        let url = `http://www.omdbapi.com/?apikey=b14985af&s=${search}`;\r\n        if (type !== 'all') {\r\n            url = url + `&type=${type}`;\r\n        }\r\n        fetch(url)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    movies: data.Search ? data.Search : [], \r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n\r\n    // пользователь кликнул ссылке по «Read more» для просмотра\r\n    // подробной информации по найденному фильму или сериалу\r\n    handleReadMore = (id) => {\r\n        this.setState({\r\n            loading: true,\r\n            show: 'movie'\r\n        });\r\n        fetch(`http://www.omdbapi.com/?apikey=b14985af&i=${id}&plot=full`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    movie: data.Title ? data : {},\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch('http://www.omdbapi.com/?apikey=b14985af&s=matrix')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    movies: data.Search ? data.Search : [],\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <main className=\"container\">\r\n                <Search enterHandler={this.handleEnter} />\r\n                {\r\n                    this.state.loading ? (\r\n                        <span class=\"container loader\"></span>\r\n                    ) : this.state.show === 'movie' ? (\r\n                        <Movie {...this.state.movie} />\r\n                    ) : (\r\n                        <Movies\r\n                            movies={this.state.movies}\r\n                            readMoreHandler={this.handleReadMore}\r\n                        />\r\n                    )\r\n                }\r\n            </main>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}